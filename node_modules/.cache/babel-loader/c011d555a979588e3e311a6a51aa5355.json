{"ast":null,"code":"var _jsxFileName = \"/home/eilon/programing/full-stack/confusion-new/confusion/src/component/Header.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useDebounce } from 'use-debounce';\nimport { Navbar, NavbarBrand, Nav, NavbarToggler, Collapse, NavItem, Jumbotron, Button, Modal, ModalBody } from 'reactstrap'; // nav link auto maticly impliment the active component and a tag\n\nimport { NavLink } from 'react-router-dom';\nimport EditBox from './EditBox';\nimport { Tabs, Tab } from \"react-bootstrap\";\nimport { LogoUrl } from '../shared/externalUrl';\nimport { useForm } from 'react-hook-form';\nimport Loading from './Loading'; //import {addMyContent} from '../redux/ActionCreators'\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { putContent, signup, login } from '../redux/ActionCreators';\nimport ColorPicker from 'react-color-picker-wheel';\n\nconst Header = props => {\n  const [{\n    myContent,\n    isLoading\n  }] = useSelector(store => [store.myContent]);\n  const dispatch = useDispatch();\n  const [isNavOpen, setIsNavOpen] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [modalTab, setModalTab] = useState(\"login\");\n  const [loginUsername, setLoginUsername] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n  const [signupUsername, setSignupUsername] = useState(\"\");\n  const [signupPassword, setSignupPassword] = useState(\"\");\n  const [signupRePassword, setSignupRePassword] = useState(\"\");\n  const [color, setColor] = useState(() => {\n    if (myContent) {\n      return myContent.color;\n    }\n\n    return null;\n  });\n  const [debounce] = useDebounce(color, 1000);\n  const [loginError, setLoginError] = useState(null);\n  const [signupError, setSignupError] = useState(\"\");\n  const {\n    register,\n    errors\n  } = useForm();\n  useEffect(() => {\n    console.log(\"color: \", color);\n\n    if (color && myContent.color !== color) {\n      myContent.color = color; //dispatch(putContent(myContent))\n    }\n  }, [debounce]);\n\n  if (myContent === null || isLoading === true) {\n    return null;\n  }\n\n  function handleLogin(event) {\n    event.preventDefault();\n    setLoginError(\"\");\n    console.log({\n      loginUsername,\n      loginPassword\n    });\n    const details = {\n      id: loginUsername,\n      password: loginPassword\n    };\n    dispatch(login(details)).then(res => {\n      if (typeof res.user === String) {\n        console.log(res);\n        setLoginError(res);\n      } else {\n        //myContent = res.user;\n        setIsModalOpen(false);\n        setLoginUsername(\"\");\n        setLoginPassword(\"\");\n      }\n    }); // check if user already exist\n  }\n\n  function handleSignup(event) {\n    event.preventDefault();\n    setSignupError(\"\");\n    console.log({\n      signupUsername,\n      signupPassword,\n      signupRePassword\n    });\n\n    if (signupRePassword !== signupPassword) {\n      setSignupError(\"passwords not match\");\n      return;\n    }\n\n    myContent.id = signupUsername;\n    myContent.password = signupPassword;\n    dispatch(signup(myContent)).then(res => {\n      if (res !== \"\") {\n        setSignupError(res);\n        myContent.id = \"0\";\n        myContent.password = \"0\";\n      } else {\n        myContent = res.user;\n        setIsModalOpen(false);\n        setSignupUsername(\"\");\n        setSignupPassword(\"\");\n        setSignupRePassword(\"\");\n      }\n    }); // check if user already exist\n  }\n\n  function componentToHex(c) {\n    var hex = c.toString(16);\n    return hex.length === 1 ? \"0\" + hex : hex;\n  }\n\n  function rgbToHex(rgb) {\n    const hex = \"#\" + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);\n    return hex;\n  }\n\n  return myContent ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    dark: true,\n    expand: \"md\",\n    style: {\n      backgroundColor: \"rgba(\" + [...color.map(c => c / 2), 1] + \")\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(NavbarToggler, {\n    onClick: () => setIsNavOpen(!isNavOpen),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(NavbarBrand, {\n    className: \"mr-auto\",\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: LogoUrl,\n    height: \"30\",\n    width: \"41\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: isNavOpen,\n    navbar: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    navbar: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link ml-md-5 offset-2 offset-md-0\",\n    to: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fa fa-home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 41\n    }\n  }), \" Home\")), /*#__PURE__*/React.createElement(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link offset-2 offset-md-0\",\n    to: \"/aboutus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fa fa-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 41\n    }\n  }), \" About Us\")), /*#__PURE__*/React.createElement(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link offset-2 offset-md-0\",\n    to: \"/menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fa fa-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 41\n    }\n  }), \" Menu\"))), /*#__PURE__*/React.createElement(Nav, {\n    className: \"ml-auto\",\n    navbar: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    outline: true,\n    onClick: () => setIsModalOpen(!isModalOpen),\n    className: \"nav-link offset-2 offset-md-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fa fa-sign-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 140\n    }\n  }), \" Login\")))))), /*#__PURE__*/React.createElement(Jumbotron, {\n    style: {\n      backgroundColor: \"rgba(\" + [...color, 1] + \")\"\n    },\n    className: \"jumbotron\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }, \"Design Your Restaurant\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-10 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(EditBox, {\n    path: myContent.id,\n    field: \"title\",\n    type: \"head\",\n    id: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(EditBox, {\n    path: myContent.id,\n    field: \"description\",\n    type: \"head\",\n    id: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header div-ColorPicker\",\n    style: {\n      marginLeft: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(ColorPicker, {\n    onChange: c => setColor(Object.values(c[\"rgb\"])),\n    size: 240,\n    initialColor: rgbToHex(color),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 33\n    }\n  }))))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isModalOpen,\n    toggle: () => setIsModalOpen(!isModalOpen),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    id: \"controlled-tab-example\",\n    activeKey: modalTab,\n    onSelect: k => setModalTab(k),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    eventKey: \"login\",\n    title: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    name: \"login\",\n    onSubmit: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-12 col-md-3\",\n    style: {\n      marginTop: \"12px\",\n      marginBottom: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 37\n    }\n  }, \"user name\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"col-12 col-md-9\",\n    style: {\n      marginTop: \"4px\",\n      marginBottom: \"8px\"\n    },\n    name: \"loginUsername\",\n    value: loginUsername,\n    onChange: event => setLoginUsername(event.target.value),\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-12 col-md-3\",\n    style: {\n      marginTop: \"4px\",\n      marginBottom: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 37\n    }\n  }, \"password\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"col-12 col-md-9\",\n    style: {\n      marginTop: \"4px\",\n      marginBottom: \"8px\"\n    },\n    type: \"password\",\n    name: \"loginPassword\",\n    value: loginPassword,\n    onChange: event => setLoginPassword(event.target.value),\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 37\n    }\n  }, loginError), /*#__PURE__*/React.createElement(\"div\", {\n    className: \" col-2 ml-auto\",\n    style: {\n      marginRight: \"8.5px\",\n      marginTop: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    style: {\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 3.5,\n      paddingBottom: 3.5\n    },\n    className: \"btn btn-primary\",\n    name: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 41\n    }\n  }, \"login\")))), /*#__PURE__*/React.createElement(Tab, {\n    eventKey: \"signUp\",\n    title: \"sign up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    name: \"signup\",\n    onSubmit: handleSignup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-12 col-md-3\",\n    style: {\n      marginTop: \"12px\",\n      marginBottom: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 37\n    }\n  }, \"user name\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"col-12 col-md-9\",\n    style: {\n      marginTop: \"4px\",\n      marginBottom: \"8px\"\n    },\n    name: \"signupUsername\",\n    value: signupUsername,\n    onChange: event => setSignupUsername(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-12 col-md-3\",\n    style: {\n      marginTop: \"4px\",\n      marginBottom: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 37\n    }\n  }, \"password\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"col-12 col-md-9\",\n    style: {\n      marginTop: \"4px\",\n      marginBottom: \"8px\"\n    },\n    type: \"password\",\n    name: \"signupPassword\",\n    value: signupPassword,\n    onChange: event => setSignupPassword(event.target.value),\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-12 col-md-3\",\n    style: {\n      marginTop: \"4px\",\n      marginBottom: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 37\n    }\n  }, \"re-enter password\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"col-12 col-md-9\",\n    style: {\n      verticalAlign: \"top\",\n      marginTop: \"10px\",\n      marginBottom: \"8px\"\n    },\n    type: \"password\",\n    name: \"signupRePassword\",\n    value: signupRePassword,\n    onChange: event => setSignupRePassword(event.target.value),\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 37\n    }\n  }, signupError), /*#__PURE__*/React.createElement(\"div\", {\n    className: \" col-3 ml-auto\",\n    style: {\n      marginRight: \"8.5px\",\n      marginTop: \"5px\",\n      paddingRight: \"0px\",\n      alignItems: \"right\",\n      justifyContent: \"right\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    style: {\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 3.5,\n      paddingBottom: 3.5\n    },\n    className: \"btn btn-primary mr-auto\",\n    name: \"submit2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 41\n    }\n  }, \"sign up\")))))))) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    dark: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Jumbotron, {\n    style: {\n      height: \"288px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }\n  }, \"loading\"));\n};\n\nexport default Header;","map":{"version":3,"sources":["/home/eilon/programing/full-stack/confusion-new/confusion/src/component/Header.js"],"names":["React","useState","useEffect","useDebounce","Navbar","NavbarBrand","Nav","NavbarToggler","Collapse","NavItem","Jumbotron","Button","Modal","ModalBody","NavLink","EditBox","Tabs","Tab","LogoUrl","useForm","Loading","useSelector","useDispatch","putContent","signup","login","ColorPicker","Header","props","myContent","isLoading","store","dispatch","isNavOpen","setIsNavOpen","isModalOpen","setIsModalOpen","modalTab","setModalTab","loginUsername","setLoginUsername","loginPassword","setLoginPassword","signupUsername","setSignupUsername","signupPassword","setSignupPassword","signupRePassword","setSignupRePassword","color","setColor","debounce","loginError","setLoginError","signupError","setSignupError","register","errors","console","log","handleLogin","event","preventDefault","details","id","password","then","res","user","String","handleSignup","componentToHex","c","hex","toString","length","rgbToHex","rgb","backgroundColor","map","margin","marginLeft","Object","values","k","marginTop","marginBottom","target","value","required","marginRight","paddingLeft","paddingRight","paddingTop","paddingBottom","verticalAlign","alignItems","justifyContent","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDebounce } from 'use-debounce';\r\nimport {\r\n    Navbar, NavbarBrand, Nav, NavbarToggler, Collapse, NavItem, Jumbotron,\r\n    Button, Modal, ModalBody\r\n} from 'reactstrap'\r\n// nav link auto maticly impliment the active component and a tag\r\nimport { NavLink } from 'react-router-dom';\r\nimport EditBox from './EditBox';\r\nimport { Tabs, Tab } from \"react-bootstrap\";\r\nimport { LogoUrl } from '../shared/externalUrl'\r\nimport { useForm } from 'react-hook-form'\r\nimport Loading from './Loading'\r\n//import {addMyContent} from '../redux/ActionCreators'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { putContent, signup, login } from '../redux/ActionCreators'\r\n\r\nimport ColorPicker from 'react-color-picker-wheel';\r\n\r\nconst Header = (props) => {\r\n\r\n\r\n    const [{ myContent, isLoading }] = useSelector(store => [store.myContent]);\r\n    const dispatch = useDispatch();\r\n\r\n    const [isNavOpen, setIsNavOpen] = useState(false);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [modalTab, setModalTab] = useState(\"login\");\r\n\r\n    const [loginUsername, setLoginUsername] = useState(\"\");\r\n    const [loginPassword, setLoginPassword] = useState(\"\");\r\n\r\n    const [signupUsername, setSignupUsername] = useState(\"\");\r\n    const [signupPassword, setSignupPassword] = useState(\"\");\r\n    const [signupRePassword, setSignupRePassword] = useState(\"\");\r\n\r\n    const [color, setColor] = useState(() => {\r\n        if (myContent) {\r\n            return myContent.color\r\n        }\r\n        return null;\r\n\r\n    });\r\n    const [debounce] = useDebounce(color, 1000)\r\n\r\n    const [loginError, setLoginError] = useState(null);\r\n    const [signupError, setSignupError] = useState(\"\");\r\n    const { register, errors } = useForm();\r\n\r\n    useEffect(() => {\r\n        console.log(\"color: \", color);\r\n        if (color && myContent.color !== color) {\r\n            myContent.color = color;\r\n            //dispatch(putContent(myContent))\r\n        }\r\n    }, [debounce])\r\n\r\n\r\n    if (myContent === null || isLoading === true) {\r\n        return null;\r\n    }\r\n\r\n\r\n    function handleLogin(event) {\r\n        event.preventDefault();\r\n        setLoginError(\"\");\r\n        console.log({ loginUsername, loginPassword });\r\n\r\n        const details = { id: loginUsername, password: loginPassword }\r\n        dispatch(login(details)).then(res => {\r\n            if (typeof res.user === String) {\r\n                console.log(res);\r\n                setLoginError(res);\r\n            }\r\n            else {\r\n                //myContent = res.user;\r\n                setIsModalOpen(false);\r\n                setLoginUsername(\"\");\r\n                setLoginPassword(\"\");\r\n            }\r\n\r\n        }); // check if user already exist\r\n    }\r\n\r\n    function handleSignup(event) {\r\n        event.preventDefault();\r\n        setSignupError(\"\");\r\n        console.log({ signupUsername, signupPassword, signupRePassword });\r\n\r\n        if (signupRePassword !== signupPassword) {\r\n            setSignupError(\"passwords not match\")\r\n            return;\r\n        }\r\n        myContent.id = signupUsername;\r\n        myContent.password = signupPassword;\r\n        dispatch(signup(myContent)).then(res => {\r\n            if (res !== \"\") {\r\n                setSignupError(res);\r\n                myContent.id = \"0\";\r\n                myContent.password = \"0\";\r\n            }\r\n            else {\r\n                myContent = res.user;\r\n                setIsModalOpen(false);\r\n                setSignupUsername(\"\");\r\n                setSignupPassword(\"\");\r\n                setSignupRePassword(\"\");\r\n            }\r\n\r\n        }); // check if user already exist\r\n    }\r\n\r\n    function componentToHex(c) {\r\n        var hex = c.toString(16);\r\n        return hex.length === 1 ? \"0\" + hex : hex;\r\n    }\r\n\r\n    function rgbToHex(rgb) {\r\n        const hex = \"#\" + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);\r\n        return hex;\r\n    }\r\n\r\n\r\n    return (\r\n        myContent ?\r\n            <React.Fragment>\r\n                <Navbar dark expand=\"md\" style={{ backgroundColor: \"rgba(\" + [...color.map(c => c / 2), 1] + \")\" }}>\r\n                    <div className=\"container\">\r\n                        <NavbarToggler onClick={() => setIsNavOpen(!isNavOpen)} />\r\n                        <NavbarBrand className='mr-auto' href=\"/\">\r\n                            <img src={LogoUrl} height=\"30\" width=\"41\" />\r\n                        </NavbarBrand>\r\n                        <Collapse isOpen={isNavOpen} navbar>\r\n                            <Nav navbar>\r\n                                <NavItem>\r\n                                    <NavLink className=\"nav-link ml-md-5 offset-2 offset-md-0\" to=\"/home\">\r\n                                        <span className=\"fa fa-home\"></span> Home\r\n                                </NavLink>\r\n                                </NavItem>\r\n                                <NavItem>\r\n                                    <NavLink className=\"nav-link offset-2 offset-md-0\" to=\"/aboutus\">\r\n                                        <span className=\"fa fa-info\"></span> About Us\r\n                                </NavLink>\r\n                                </NavItem>\r\n                                <NavItem>\r\n                                    <NavLink className=\"nav-link offset-2 offset-md-0\" to=\"/menu\">\r\n                                        <span className=\"fa fa-list\"></span> Menu\r\n                                </NavLink>\r\n                                </NavItem>\r\n                                {/* \r\n                                <NavItem>\r\n                                    <NavLink className=\"nav-link offset-2 offset-md-0\" to=\"/contactus\">\r\n                                        <span className=\"fa fa-address-card\"></span> Contact US\r\n                                </NavLink>\r\n                                 \r\n                                </NavItem>*/}\r\n                            </Nav>\r\n                            <Nav className=\"ml-auto\" navbar>\r\n                                <NavItem >\r\n                                    <Button outline onClick={() => setIsModalOpen(!isModalOpen)} className=\"nav-link offset-2 offset-md-0\"><span className=\"fa fa-sign-in\"></span> Login</Button>\r\n                                </NavItem>\r\n                            </Nav>\r\n                        </Collapse>\r\n                    </div>\r\n                </Navbar>\r\n                <Jumbotron style={{ backgroundColor: \"rgba(\" + [...color, 1] + \")\" }} className=\"jumbotron\">\r\n                    <div className=\"container\">\r\n                        <div className='header row'>\r\n                            <h1 style={{ margin: \"auto\" }}>Design Your Restaurant</h1>\r\n                        </div>\r\n                        <div className='header row'>\r\n                            <div className='col-10 col-md-6'>\r\n                                <EditBox path={myContent.id} field=\"title\" type=\"head\" id=\"0\" />\r\n                                <EditBox path={myContent.id} field=\"description\" type=\"head\" id=\"0\" />\r\n                            </div>\r\n                            <div className=\"header div-ColorPicker\" style={{ marginLeft: \"auto\" }}>\r\n                                <ColorPicker\r\n                                    onChange={(c => setColor(Object.values(c[\"rgb\"])))}\r\n                                    size={240}\r\n                                    initialColor={rgbToHex(color)}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Jumbotron>\r\n                <Modal isOpen={isModalOpen} toggle={() => setIsModalOpen(!isModalOpen)}>\r\n                    <ModalBody>\r\n\r\n                        <Tabs\r\n                            id=\"controlled-tab-example\"\r\n                            activeKey={modalTab}\r\n                            onSelect={(k) => setModalTab(k)}\r\n                        >\r\n                            <Tab eventKey=\"login\" title=\"login\">\r\n                                <form name=\"login\" onSubmit={handleLogin}>\r\n                                    <label className=\"col-12 col-md-3\" style={{ marginTop: \"12px\", marginBottom: \"8px\" }}>user name</label>\r\n                                    <input className=\"col-12 col-md-9\" style={{ marginTop: \"4px\", marginBottom: \"8px\" }} name=\"loginUsername\" value={loginUsername}\r\n                                        onChange={(event) => setLoginUsername(event.target.value)}\r\n                                        ref={register({ required: true })} />\r\n\r\n                                    <label className=\"col-12 col-md-3\" style={{ marginTop: \"4px\", marginBottom: \"8px\" }}>password</label>\r\n                                    <input className=\"col-12 col-md-9\" style={{ marginTop: \"4px\", marginBottom: \"8px\" }} type=\"password\" name=\"loginPassword\" value={loginPassword}\r\n                                        onChange={(event) => setLoginPassword(event.target.value)}\r\n                                        ref={register({ required: true })} />\r\n\r\n                                    <div style={{ color: \"red\" }}>{loginError}</div>\r\n                                    <div className=\" col-2 ml-auto\" style={{ marginRight: \"8.5px\", marginTop: \"5px\" }}>\r\n                                        <button type=\"submit\" style={{ paddingLeft: 10, paddingRight: 10, paddingTop: 3.5, paddingBottom: 3.5 }} className=\"btn btn-primary\" name=\"submit\">login</button>\r\n                                    </div>\r\n                                </form>\r\n                            </Tab>\r\n\r\n                            <Tab eventKey=\"signUp\" title=\"sign up\">\r\n                                <form name=\"signup\" onSubmit={handleSignup}>\r\n                                    <label className=\"col-12 col-md-3\" style={{ marginTop: \"12px\", marginBottom: \"8px\" }}>user name</label>\r\n                                    <input className=\"col-12 col-md-9\" style={{ marginTop: \"4px\", marginBottom: \"8px\" }} name=\"signupUsername\" value={signupUsername}\r\n                                        onChange={(event) => setSignupUsername(event.target.value)} />\r\n\r\n                                    <label className=\"col-12 col-md-3\" style={{ marginTop: \"4px\", marginBottom: \"8px\" }}>password</label>\r\n                                    <input className=\"col-12 col-md-9\" style={{ marginTop: \"4px\", marginBottom: \"8px\" }} type=\"password\" name=\"signupPassword\" value={signupPassword}\r\n                                        onChange={(event) => setSignupPassword(event.target.value)}\r\n                                        ref={register({ required: true })} />\r\n\r\n                                    <label className=\"col-12 col-md-3\" style={{ marginTop: \"4px\", marginBottom: \"8px\" }}>re-enter password</label>\r\n                                    <input className=\"col-12 col-md-9\" style={{ verticalAlign: \"top\", marginTop: \"10px\", marginBottom: \"8px\" }} type=\"password\" name=\"signupRePassword\" value={signupRePassword}\r\n                                        onChange={(event) => setSignupRePassword(event.target.value)}\r\n                                        ref={register({ required: true })} />\r\n\r\n                                    <div style={{ color: \"red\" }}>{signupError}</div>\r\n                                    <div className=\" col-3 ml-auto\" style={{ marginRight: \"8.5px\", marginTop: \"5px\", paddingRight: \"0px\", alignItems: \"right\", justifyContent: \"right\" }}>\r\n                                        <button type=\"submit\" style={{ paddingLeft: 10, paddingRight: 10, paddingTop: 3.5, paddingBottom: 3.5 }} className=\"btn btn-primary mr-auto\" name=\"submit2\">sign up</button>\r\n                                    </div>\r\n                                </form>\r\n                            </Tab>\r\n                        </Tabs>\r\n                    </ModalBody>\r\n                </Modal>\r\n            </React.Fragment>\r\n\r\n            :\r\n            <React.Fragment>\r\n                <Navbar dark >\r\n                </Navbar>\r\n                <Jumbotron style={{height: \"288px\"}}>\r\n                    loading\r\n                </Jumbotron>\r\n            </React.Fragment>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default Header"]},"metadata":{},"sourceType":"module"}