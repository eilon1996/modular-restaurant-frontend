{"ast":null,"code":"import _classCallCheck from\"/home/eilon/programing/full-stack/React/confusion/confusion-new/confusion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/eilon/programing/full-stack/React/confusion/confusion-new/confusion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/eilon/programing/full-stack/React/confusion/confusion-new/confusion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/eilon/programing/full-stack/React/confusion/confusion-new/confusion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/eilon/programing/full-stack/React/confusion/confusion-new/confusion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';// the next comment allow the compiler to ignore the problem\n// eslint-disable-next-line\nimport Menu from'./MenuComponent';import Contact from'./ContactComponent';import About from'./AboutComponent';import Home from'./HomeComponent';import DishDetail from'./DishdetailComponent';import Header from'./HeaderComponent';import Footer from'./FooterComponent';import{Switch,Route,Redirect}from'react-router-dom';import{connect}from'react-redux';import{actions}from'react-redux-form';import{postComment as _postComment,postFeedback as _postFeedback,putContent as _putContent,signup as _signup,fetchContent as _fetchContent,fetchMyContent as _fetchMyContent,fetchDishes as _fetchDishes,fetchComments as _fetchComments,fetchPromos as _fetchPromos,fetchLeaders as _fetchLeaders}from'../redux/ActionCreators';import{TransitionGroup,CSSTransition}from'react-transition-group';import{withRouter}from'react-router';var mapStateToProps=function mapStateToProps(state){console.log(\"mapStateToProps\",state.content);/* TODO: allow easy access to all content fields\r\n  var content = null;\r\n  if(state.content){\r\n    content = {content:[state.content.content.id, state.content.content.password, state.content.content.title,\r\n       state.content.content.titleFontSize, state.content.content.description , tstate.content.content.descriptionFontSize]}\r\n  }\r\n  */return{myContent:state.myContent,content:state.content,dishes:state.dishes,comments:state.comments,promotions:state.promotions,leaders:state.leaders};};var mapDispatchToProps=function mapDispatchToProps(dispatch){console.log(\"mapDispatchToProps\");return{putContent:function putContent(fields_value){return dispatch(_putContent(fields_value));},signup:function signup(fields_value){return dispatch(_signup(fields_value));},postComment:function postComment(dishId,rating,author,comment){return dispatch(_postComment(dishId,rating,author,comment));},postFeedback:function postFeedback(firstName,lastName,telNum,email,agree,contactType,message){return dispatch(_postFeedback(firstName,lastName,telNum,email,agree,contactType,message));},fetchMyContent:function fetchMyContent(id){dispatch(_fetchMyContent(id));},fetchContent:function fetchContent(){dispatch(_fetchContent());},fetchDishes:function fetchDishes(){dispatch(_fetchDishes());},resetFeedbackForm:function resetFeedbackForm(){dispatch(actions.reset('feedback'));},fetchComments:function fetchComments(){return dispatch(_fetchComments());},fetchPromos:function fetchPromos(){return dispatch(_fetchPromos());},fetchLeaders:function fetchLeaders(){return dispatch(_fetchLeaders());}};};var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.state={myId:\"0\",myContent:null};_this.fetchMyContent=_this.fetchMyContent.bind(_assertThisInitialized(_this));return _this;}_createClass(Main,[{key:\"fetchMyContent\",value:function fetchMyContent(myContent){this.setState({myId:myContent.id,myContent:myContent});}},{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"componentDidMount1\");this.props.fetchMyContent(this.state.myId);this.props.fetchContent();this.props.fetchDishes();this.props.fetchComments();this.props.fetchPromos();this.props.fetchLeaders();console.log(\"componentDidMount2\");}},{key:\"render\",value:function render(){var _this2=this;var HomePage=function HomePage(){console.log(\"MainComponent:HomePage\",_this2.props.dishes);return/*#__PURE__*/React.createElement(Home,{dish:_this2.props.dishes.dishes.filter(function(dish){return dish.featured;})[0],dishesLoading:_this2.props.dishes.isLoading,dishesErrMess:_this2.props.dishes.errMess,promotion:_this2.props.promotions.promotions.filter(function(promo){return promo.featured;})[0],promoLoading:_this2.props.promotions.isLoading,promoErrMess:_this2.props.promotions.errMess,leader:_this2.props.leaders.leaders.filter(function(leader){return leader;})[0],leaderLoading:_this2.props.leaders.isLoading,leaderErrMess:_this2.props.leaders.errMess});};var DishWithId=function DishWithId(_ref){var match=_ref.match;return/*#__PURE__*/React.createElement(DishDetail,{dish:_this2.props.dishes.dishes.filter(function(dish){return dish.id===parseInt(match.params.dishId,10);})[0],isLoading:_this2.props.dishes.isLoading,errMess:_this2.props.dishes.errMess,comments:_this2.props.comments.comments.filter(function(comment){return comment.dishId===parseInt(match.params.dishId,10);}),commentsErrMess:_this2.props.comments.errMess,postComment:_this2.props.postComment});};var HeaderPart=function HeaderPart(){console.log(\"MainComponent:HeaderPart \",_this2.props.content);return/*#__PURE__*/React.createElement(Header,{putContent:_this2.props.putContent,signup:_this2.props.signup,myContent:_this2.props.myContent.myContent,fetchMyContent:_this2.props.fetchMyContent,content:_this2.props.content.content,contentLoading:_this2.props.content.isLoading,contentErrMess:_this2.props.content.errMess});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(HeaderPart,null),/*#__PURE__*/React.createElement(TransitionGroup,null,/*#__PURE__*/React.createElement(CSSTransition,{key:this.props.location.key,classNames:\"page\",timeout:300},/*#__PURE__*/React.createElement(Switch,{location:this.props.location},/*#__PURE__*/React.createElement(Route,{path:\"/home\",component:HomePage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/aboutus\",component:function component(){return/*#__PURE__*/React.createElement(About,{leaders:_this2.props.leaders,isLoading:_this2.props.leaders.isLoading,errMess:_this2.props.leaders.errMess});}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/menu\",component:function component(){return/*#__PURE__*/React.createElement(Menu,{dishes:_this2.props.dishes});}}),/*#__PURE__*/React.createElement(Route,{path:\"/menu/:dishId\",component:DishWithId}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/contactus\",component:function component(){return/*#__PURE__*/React.createElement(Contact,{resetFeedbackForm:_this2.props.resetFeedbackForm,postFeedback:_this2.props.postFeedback});}}),/*#__PURE__*/React.createElement(Redirect,{to:\"/home\"})))),/*#__PURE__*/React.createElement(Footer,null));}}]);return Main;}(Component);// this connect the main to the redux store and allow accsess to its fields\nexport default withRouter(connect(mapStateToProps,mapDispatchToProps)(Main));","map":{"version":3,"sources":["/home/eilon/programing/full-stack/React/confusion/confusion-new/confusion/src/component/MainComponent.js"],"names":["React","Component","Menu","Contact","About","Home","DishDetail","Header","Footer","Switch","Route","Redirect","connect","actions","postComment","postFeedback","putContent","signup","fetchContent","fetchMyContent","fetchDishes","fetchComments","fetchPromos","fetchLeaders","TransitionGroup","CSSTransition","withRouter","mapStateToProps","state","console","log","content","myContent","dishes","comments","promotions","leaders","mapDispatchToProps","dispatch","fields_value","dishId","rating","author","comment","firstName","lastName","telNum","email","agree","contactType","message","id","resetFeedbackForm","reset","Main","props","myId","bind","setState","HomePage","filter","dish","featured","isLoading","errMess","promo","leader","DishWithId","match","parseInt","params","HeaderPart","location","key"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n// the next comment allow the compiler to ignore the problem\r\n// eslint-disable-next-line\r\nimport Menu from './MenuComponent';\r\nimport Contact from './ContactComponent';\r\nimport About from './AboutComponent';\r\nimport Home from './HomeComponent';\r\nimport DishDetail from './DishdetailComponent';\r\nimport Header from './HeaderComponent';\r\nimport Footer from './FooterComponent';\r\nimport {Switch, Route, Redirect} from 'react-router-dom';\r\nimport { connect } from 'react-redux'\r\nimport { actions } from 'react-redux-form';\r\nimport { postComment, postFeedback, putContent, signup, fetchContent,fetchMyContent, fetchDishes, fetchComments, fetchPromos, fetchLeaders } from '../redux/ActionCreators';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\nimport { withRouter } from 'react-router';\r\n\r\n\r\nconst mapStateToProps = state =>{\r\n  console.log(\"mapStateToProps\", state.content);\r\n\r\n  /* TODO: allow easy access to all content fields\r\n  var content = null;\r\n  if(state.content){\r\n    content = {content:[state.content.content.id, state.content.content.password, state.content.content.title,\r\n       state.content.content.titleFontSize, state.content.content.description , tstate.content.content.descriptionFontSize]}\r\n  }\r\n  */\r\n  return{\r\n    myContent: state.myContent,\r\n    content: state.content,\r\n    dishes: state.dishes,\r\n    comments: state.comments,\r\n    promotions: state.promotions,\r\n    leaders: state.leaders\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  \r\n  console.log(\"mapDispatchToProps\")\r\n  return{\r\n  putContent: (fields_value) => dispatch(putContent(fields_value)),\r\n  signup:(fields_value) => dispatch(signup(fields_value)),\r\n  postComment: (dishId, rating, author, comment) => dispatch(postComment(dishId, rating, author, comment)),\r\n  postFeedback: (firstName, lastName, telNum, email, agree, contactType, message) => dispatch(postFeedback(firstName, lastName, telNum, email, agree, contactType, message)),\r\n  \r\n  fetchMyContent: (id) => { dispatch(fetchMyContent(id))},\r\n\r\n  fetchContent: () => { dispatch(fetchContent())},\r\n  fetchDishes: () => {  dispatch(fetchDishes())},\r\n  resetFeedbackForm: () => { dispatch(actions.reset('feedback'))},\r\n  fetchComments: () => dispatch(fetchComments()),\r\n  fetchPromos: () => dispatch(fetchPromos()),\r\n  fetchLeaders: () => dispatch(fetchLeaders())\r\n   }\r\n  };\r\n\r\nclass Main extends Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      myId:\"0\",\r\n      myContent:null\r\n    }\r\n\r\n    this.fetchMyContent = this.fetchMyContent.bind(this)\r\n }\r\n\r\n fetchMyContent(myContent){\r\n    this.setState({\r\n      myId:myContent.id,\r\n      myContent:myContent\r\n    });\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    console.log(\"componentDidMount1\")\r\n\r\n    this.props.fetchMyContent(this.state.myId);\r\n    this.props.fetchContent();\r\n\r\n    this.props.fetchDishes();\r\n    this.props.fetchComments();\r\n    this.props.fetchPromos();\r\n    this.props.fetchLeaders();\r\n    \r\n  console.log(\"componentDidMount2\")\r\n  }\r\n\r\n\r\n  render(){\r\n\r\n    const HomePage = () => {\r\n      console.log(\"MainComponent:HomePage\", this.props.dishes);\r\n      return(          \r\n        <Home \r\n          dish={this.props.dishes.dishes.filter((dish) => dish.featured)[0]}\r\n          dishesLoading={this.props.dishes.isLoading}\r\n          dishesErrMess={this.props.dishes.errMess}\r\n\r\n          promotion={this.props.promotions.promotions.filter((promo) => promo.featured)[0]}\r\n          promoLoading={this.props.promotions.isLoading}\r\n          promoErrMess={this.props.promotions.errMess}\r\n\r\n          leader={this.props.leaders.leaders.filter((leader) => leader)[0]}\r\n          leaderLoading={this.props.leaders.isLoading}\r\n          leaderErrMess={this.props.leaders.errMess}\r\n        />\r\n      );\r\n    }\r\n\r\n    const DishWithId = ({match}) => {\r\n      return(\r\n        <DishDetail\r\n         dish={this.props.dishes.dishes.filter((dish) => dish.id === parseInt(match.params.dishId,10))[0]}\r\n          isLoading={this.props.dishes.isLoading}\r\n          errMess={this.props.dishes.errMess}\r\n\r\n          comments={this.props.comments.comments.filter((comment) => comment.dishId === parseInt(match.params.dishId,10))}\r\n          commentsErrMess={this.props.comments.errMess}\r\n          postComment={this.props.postComment}\r\n      />\r\n      );\r\n    };\r\n\r\n    const HeaderPart = () => {\r\n      console.log(\"MainComponent:HeaderPart \",this.props.content);\r\n      return(\r\n        <Header \r\n        \r\n        putContent={this.props.putContent} \r\n        signup={this.props.signup} \r\n        \r\n        myContent = {this.props.myContent.myContent}\r\n        fetchMyContent = {this.props.fetchMyContent}\r\n        \r\n        content = {this.props.content.content}\r\n        contentLoading = {this.props.content.isLoading}\r\n        contentErrMess = {this.props.content.errMess}\r\n\r\n      />\r\n      );\r\n    };\r\n\r\n    return(\r\n      <div>\r\n        <HeaderPart/>\r\n          <TransitionGroup>\r\n            <CSSTransition key={this.props.location.key} classNames=\"page\" timeout={300}>\r\n              <Switch location={this.props.location}>\r\n                  <Route path='/home' component={HomePage} />\r\n                  <Route exact path='/aboutus' component={() => \r\n                      <About leaders={this.props.leaders}        \r\n                          isLoading={this.props.leaders.isLoading}\r\n                          errMess={this.props.leaders.errMess}\r\n                            />} />\r\n                  <Route exact path='/menu' component={() => <Menu dishes={this.props.dishes} />} />\r\n                  <Route path='/menu/:dishId' component={DishWithId} />\r\n                  <Route exact path='/contactus' component={() => \r\n                      <Contact resetFeedbackForm={this.props.resetFeedbackForm}\r\n                      postFeedback={this.props.postFeedback}/>} />\r\n                  <Redirect to=\"/home\"/>\r\n              </Switch>\r\n            </CSSTransition>\r\n          </TransitionGroup>\r\n        <Footer/>\r\n        </div>\r\n  );\r\n  }\r\n}\r\n// this connect the main to the redux store and allow accsess to its fields\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)((Main)));"]},"metadata":{},"sourceType":"module"}