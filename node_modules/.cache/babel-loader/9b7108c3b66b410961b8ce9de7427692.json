{"ast":null,"code":"var _jsxFileName = \"/home/eilon/programing/full-stack/confusion-new/confusion/src/component/UploadS3.js\";\nimport React, { useState } from 'react';\nimport { Card, CardImg, CardImgOverlay, CardTitle, CardBody, CardText } from 'reactstrap';\nimport axios from 'axios';\nimport 'react-dropzone-uploader/dist/styles.css';\nimport Dropzone from 'react-dropzone-uploader';\n\nconst UploadS3 = props => {\n  // specify upload params and url for your files\n  const getUploadParams = ({\n    meta\n  }) => {\n    return {\n      url: 'https://httpbin.org/post'\n    };\n  }; // called every time a file's `status` changes\n\n\n  const handleChangeStatus = ({\n    meta,\n    file\n  }, status) => {\n    console.log(status, meta, file);\n\n    if (status === \"done\") {\n      var data = new FormData();\n      var ending = file.name.split('.');\n      const imgName = \"users/\" + props.type + \"/\" + props.myId + \"-\" + props.itemId + \".\" + ending[ending.length - 1];\n      data.append('image', file, imgName);\n      var config = {\n        method: 'POST',\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Credentials\": true,\n        url: \"https:warm-fjord-92793.herokuapp.com/upload\",\n        //url: process.env.BACKEND_PORT+\"/upload\",\n        data: data\n      };\n      axios(config).then(response => {\n        console.log(JSON.stringify(response.data));\n      }).catch(function (error) {\n        console.log(error.message);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Dropzone, {\n    getUploadParams: getUploadParams,\n    onChangeStatus: handleChangeStatus,\n    accept: \"image/*\",\n    maxFiles: 1,\n    inputContent: (files, extra) => extra.reject ? 'Only Image file is allowed' : 'Drop Image Here',\n    styles: {\n      dropzoneReject: {\n        borderColor: '#F19373',\n        backgroundColor: '#F1BDAB'\n      },\n      inputLabel: (files, extra) => extra.reject ? {\n        color: '#A02800'\n      } : {}\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  });\n}; // to add submit button to the dropzone add in <Dropzone>   onSubmit={handleSubmit}\n\n\nexport default UploadS3;","map":{"version":3,"sources":["/home/eilon/programing/full-stack/confusion-new/confusion/src/component/UploadS3.js"],"names":["React","useState","Card","CardImg","CardImgOverlay","CardTitle","CardBody","CardText","axios","Dropzone","UploadS3","props","getUploadParams","meta","url","handleChangeStatus","file","status","console","log","data","FormData","ending","name","split","imgName","type","myId","itemId","length","append","config","method","then","response","JSON","stringify","catch","error","message","files","extra","reject","dropzoneReject","borderColor","backgroundColor","inputLabel","color"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,OAAf,EAAwBC,cAAxB,EAAwCC,SAAxC,EAAmDC,QAAnD,EAA6DC,QAA7D,QAA6E,YAA7E;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,yCAAP;AAEA,OAAOC,QAAP,MAAqB,yBAArB;;AAIA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAEpB;AACA,QAAMC,eAAe,GAAG,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAc;AAAE,WAAO;AAAEC,MAAAA,GAAG,EAAE;AAAP,KAAP;AAA4C,GAApF,CAHoB,CAKpB;;;AACA,QAAMC,kBAAkB,GAAG,CAAC;AAAEF,IAAAA,IAAF;AAAQG,IAAAA;AAAR,GAAD,EAAiBC,MAAjB,KAA4B;AACnDC,IAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ,EAAoBJ,IAApB,EAA0BG,IAA1B;;AACA,QAAIC,MAAM,KAAK,MAAf,EAAuB;AACnB,UAAIG,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACA,UAAIC,MAAM,GAAGN,IAAI,CAACO,IAAL,CAAUC,KAAV,CAAgB,GAAhB,CAAb;AACA,YAAMC,OAAO,GAAG,WAASd,KAAK,CAACe,IAAf,GAAoB,GAApB,GAAwBf,KAAK,CAACgB,IAA9B,GAAmC,GAAnC,GAAuChB,KAAK,CAACiB,MAA7C,GAAoD,GAApD,GAAwDN,MAAM,CAACA,MAAM,CAACO,MAAP,GAAc,CAAf,CAA9E;AACAT,MAAAA,IAAI,CAACU,MAAL,CAAY,OAAZ,EAAqBd,IAArB,EAA2BS,OAA3B;AAEA,UAAIM,MAAM,GAAG;AACTC,QAAAA,MAAM,EAAE,MADC;AAET,uCAA+B,GAFtB;AAGT,4CAAmC,IAH1B;AAITlB,QAAAA,GAAG,EAAE,6CAJI;AAKT;AACAM,QAAAA,IAAI,EAAEA;AANG,OAAb;AASAZ,MAAAA,KAAK,CAACuB,MAAD,CAAL,CACKE,IADL,CACUC,QAAQ,IAAI;AACdhB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,IAAI,CAACC,SAAL,CAAeF,QAAQ,CAACd,IAAxB,CAAZ;AACH,OAHL,EAIKiB,KAJL,CAIW,UAAUC,KAAV,EAAiB;AACpBpB,QAAAA,OAAO,CAACC,GAAR,CAAYmB,KAAK,CAACC,OAAlB;AACH,OANL;AAOH;AACJ,GAzBD;;AA2BA,sBACI,oBAAC,QAAD;AACI,IAAA,eAAe,EAAE3B,eADrB;AAEI,IAAA,cAAc,EAAEG,kBAFpB;AAGI,IAAA,MAAM,EAAC,SAHX;AAII,IAAA,QAAQ,EAAE,CAJd;AAKI,IAAA,YAAY,EAAE,CAACyB,KAAD,EAAQC,KAAR,KAAmBA,KAAK,CAACC,MAAN,GAAe,4BAAf,GAA8C,iBALnF;AAMI,IAAA,MAAM,EAAE;AACJC,MAAAA,cAAc,EAAE;AAAEC,QAAAA,WAAW,EAAE,SAAf;AAA0BC,QAAAA,eAAe,EAAE;AAA3C,OADZ;AAEJC,MAAAA,UAAU,EAAE,CAACN,KAAD,EAAQC,KAAR,KAAmBA,KAAK,CAACC,MAAN,GAAe;AAAEK,QAAAA,KAAK,EAAE;AAAT,OAAf,GAAsC;AAFjE,KANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAaH,CA9CL,C,CAgDA;;;AAGA,eAAerC,QAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Card, CardImg, CardImgOverlay, CardTitle, CardBody, CardText } from 'reactstrap';\nimport axios from 'axios';\nimport 'react-dropzone-uploader/dist/styles.css'\n\nimport Dropzone from 'react-dropzone-uploader'\n\n\n\nconst UploadS3 = (props) => {\n\n        // specify upload params and url for your files\n        const getUploadParams = ({ meta }) => { return { url: 'https://httpbin.org/post' } }\n\n        // called every time a file's `status` changes\n        const handleChangeStatus = ({ meta, file }, status) => {\n            console.log(status, meta, file)\n            if (status === \"done\") {\n                var data = new FormData();\n                var ending = file.name.split('.');\n                const imgName = \"users/\"+props.type+\"/\"+props.myId+\"-\"+props.itemId+\".\"+ending[ending.length-1]\n                data.append('image', file, imgName);\n\n                var config = {\n                    method: 'POST',\n                    \"Access-Control-Allow-Origin\": \"*\",\n                    \"Access-Control-Allow-Credentials\":true,\n                    url: \"https:warm-fjord-92793.herokuapp.com/upload\",\n                    //url: process.env.BACKEND_PORT+\"/upload\",\n                    data: data\n                };\n\n                axios(config)\n                    .then(response => {\n                        console.log(JSON.stringify(response.data));\n                    })\n                    .catch(function (error) {\n                        console.log(error.message);\n                    });\n            }\n        }\n\n        return (\n            <Dropzone\n                getUploadParams={getUploadParams}\n                onChangeStatus={handleChangeStatus}\n                accept=\"image/*\"\n                maxFiles={1}\n                inputContent={(files, extra) => (extra.reject ? 'Only Image file is allowed' : 'Drop Image Here')}\n                styles={{\n                    dropzoneReject: { borderColor: '#F19373', backgroundColor: '#F1BDAB' },\n                    inputLabel: (files, extra) => (extra.reject ? { color: '#A02800' } : {}),\n                }}\n            />\n        )\n    }\n\n// to add submit button to the dropzone add in <Dropzone>   onSubmit={handleSubmit}\n\n\nexport default UploadS3;"]},"metadata":{},"sourceType":"module"}