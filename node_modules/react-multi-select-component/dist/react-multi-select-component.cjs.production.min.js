"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("goober"),n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e;function a(e,r){var n=e.length,t=r.length,a=[];if(!n||!t)return 0;if(n<t){var o=[r,e];e=o[0],r=o[1]}if(-1!==e.indexOf(r))return t+1/n;for(var l=0;l<=n;++l)a[l]=[0];for(var i=0;i<=t;++i)a[0][i]=0;for(var c=1;c<=n;++c)for(var s=1;s<=t;++s)a[c][s]=e[c-1]===r[s-1]?1+a[c-1][s-1]:Math.max(a[c][s-1],a[c-1][s]);return a[n][t]}function o(e,r){if(!e)return"";if(e=e.toUpperCase().replace(/((?=[^\u00E0-\u00FC])\W)|_/g,""),!r)return e;var n=r;return Object.keys(n).reduce((function(e,r){var t=new RegExp(r,"g");return e.replace(t,n[r])}),e)}var l={selectSomeItems:"Select...",allItemsAreSelected:"All items are selected.",selectAll:"Select All",search:"Search",clearSearch:"Clear Search"};function i(e,r){return(null==r?void 0:r[e])||l[e]}var c,s=function(){return t.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray"},t.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},d=r.css({"& input,& span":{verticalAlign:"middle",margin:0},span:{display:"inline-block",paddingLeft:"5px"},"&.disabled":{opacity:.5}}),u=function(e){var r=e.option,n=e.disabled;return t.createElement("div",{className:d+" item-renderer "+(n&&"disabled")},t.createElement("input",{type:"checkbox",onChange:e.onClick,checked:e.checked,tabIndex:-1,disabled:n}),t.createElement("span",null,r.label))},f=r.css({boxSizing:"border-box",cursor:"pointer",display:"block",padding:"var(--rmsc-p)",outline:0,"&:hover,&:focus":{background:"var(--rmsc-hover)"},"&.selected":{background:"var(--rmsc-selected)"}}),m=function(e){var r=e.itemRenderer,a=void 0===r?u:r,o=e.option,l=e.checked,i=e.focused,c=e.tabIndex,s=e.disabled,d=e.onSelectionChanged,m=e.onClick,p=n.useRef();n.useEffect((function(){h()}),[i]);var v=function(){d(!l)},h=function(){i&&!s&&p&&p.current.focus()};return t.createElement("label",{className:f+" select-item "+(l&&"selected"),role:"option","aria-selected":l,tabIndex:c,ref:p,onKeyDown:function(e){switch(e.which){case 13:case 32:v();break;default:return}e.preventDefault()}},t.createElement(a,{option:o,checked:l,onClick:function(e){v(),m(e)},disabled:s}))},p=r.css({margin:0,paddingLeft:0,li:{listStyle:"none",margin:0}}),v=function(e){var r=e.value,n=e.onChange,a=e.disabled,o=e.ItemRenderer,l=e.focusIndex,i=e.onClick;return t.createElement("ul",{className:p},e.options.map((function(e,c){var s=c+2;return t.createElement("li",{key:e.hasOwnProperty("key")?e.key:c},t.createElement(m,{focused:l===s,tabIndex:s,option:e,onSelectionChanged:function(t){return o=e,void(a||n(t?[].concat(r,[o]):r.filter((function(e){return e.value!==o.value}))));var o},checked:!!r.find((function(r){return r.value===e.value})),onClick:function(e){return i(e,s)},itemRenderer:o,disabled:e.disabled||a}))})))};!function(e){e[e.SEARCH=-1]="SEARCH",e[e.NONE=1]="NONE"}(c||(c={}));var h=r.css({width:"100%",position:"relative",borderBottom:"1px solid var(--rmsc-border)",input:{height:"var(--rmsc-h)",padding:"0 var(--rmsc-p)",width:"100%",outline:0,border:0}}),g=r.css({cursor:"pointer",position:"absolute",top:0,right:0,bottom:0,background:"none",border:0,padding:"0 calc(var(--rmsc-p)/2)","[hidden]":{display:"none"}}),b=function(e){var r=e.onChange,l=e.options,d=e.value,u=e.filterOptions,f=e.selectAllLabel,p=e.ItemRenderer,b=e.disabled,x=e.disableSearch,E=e.focusSearchOnOpen,k=e.hasSelectAll,S=e.overrideStrings,y=e.ClearIcon,w=n.useState(""),C=w[0],R=w[1],N=n.useState(E&&!x?c.SEARCH:c.NONE),I=N[0],A=N[1],O=n.useState(),D=O[0],M=O[1],H={label:f||i("selectAll",S),value:""};n.useEffect((function(){M(L(!0).length)}),[l]);var L=function(e){var r=d.map((function(e){return e.value}));return l.filter((function(n){var t=n.disabled,a=n.value;return e?!t||r.includes(a):t&&r.includes(a)}))},T=function(e){return A(e)},B=function(e){var r=I+e;r=Math.max(1,r),r=Math.min(r,l.length),A(r)};return t.createElement("div",{className:"select-panel",role:"listbox",onKeyDown:function(e){switch(e.which){case 38:if(e.altKey)return;B(-1);break;case 40:if(e.altKey)return;B(1);break;default:return}e.stopPropagation(),e.preventDefault()}},!x&&t.createElement("div",{className:h},t.createElement("input",{autoFocus:E,placeholder:i("search",S),type:"text","aria-describedby":i("search",S),onChange:function(e){R(e.target.value),A(c.SEARCH)},onFocus:function(){A(c.SEARCH)},value:C}),t.createElement("button",{className:g+" search-clear-button",hidden:!C,onClick:function(){return R("")},"aria-label":i("clearSearch",S)},y||t.createElement(s,null))),k&&!C&&t.createElement(m,{focused:1===I,tabIndex:1,checked:D===d.length,option:H,onSelectionChanged:function(e){var n=L(e);r(n)},onClick:function(){return T(0)},itemRenderer:p,disabled:b}),t.createElement(v,Object.assign({},e,{options:u?u(l,C):function(e,r,n){if(!r)return e;var t=o(r,void 0);return e.filter((function(e){return null!=e.label&&null!=e.value})).map((function(e){return{option:e,score:a(o(e.label,void 0),t)}})).filter((function(e){return e.score>=t.length-2})).sort((function(e,r){return r.score-e.score})).map((function(e){return e.option}))}(l,C),focusIndex:I,onClick:function(e,r){return T(r)},ItemRenderer:p,disabled:b})))};function x(e){return t.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray"},t.createElement("path",{d:e.expanded?"M18 15 12 9 6 15":"M6 9L12 15 18 9"}))}var E=r.css({animation:"rotate 2s linear infinite","& .path":{stroke:"var(--rmsc-border)",strokeWidth:"4px",strokeLinecap:"round",animation:"dash 1.5s ease-in-out infinite"},"@keyframes rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes dash":{"0%":{strokeDasharray:"1,150",strokeDashoffset:0},"50%":{strokeDasharray:"90,150",strokeDashoffset:"-35"},"100%":{strokeDasharray:"90,150",strokeDashoffset:"-124"}}});function k(e){var r=e.size,n=void 0===r?24:r;return t.createElement("span",{style:{width:n,marginRight:"0.2rem"}},t.createElement("svg",{width:n,height:n,className:E,viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"}},t.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})))}var S=r.css({position:"absolute",zIndex:1,top:"100%",width:"100%",paddingTop:"8px",".panel-content":{maxHeight:"300px",overflowY:"auto",borderRadius:"var(--rmsc-radius)",background:"var(--rmsc-bg)",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.1), 0 4px 11px rgba(0, 0, 0, 0.1)"}}),y=r.css({position:"relative",outline:0,backgroundColor:"var(--rmsc-bg)",border:"1px solid var(--rmsc-border)",borderRadius:"var(--rmsc-radius)","&:focus-within":{boxShadow:"var(--rmsc-main) 0 0 0 1px",borderColor:"var(--rmsc-main)"}}),w=r.css({position:"relative",padding:"0 var(--rmsc-p)",display:"flex",alignItems:"center",width:"100%",height:"var(--rmsc-h)",cursor:"default",outline:0,".dropdown-heading-value":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}}),C=function(e){var r=e.children,a=e.contentComponent,o=e.contentProps,l=e.isLoading,i=e.disabled,c=e.shouldToggleOnHover,s=e.labelledBy,d=e.onMenuToggle,u=e.ArrowRenderer,f=n.useState(!1),m=f[0],p=f[1],v=n.useState(!1),h=v[0],g=v[1],b=u||x,E=n.useRef();n.useEffect((function(){d&&d(m)}),[m]);var C=function(e){c&&p(e)};return t.createElement("div",{tabIndex:0,className:y+" dropdown-container","aria-labelledby":s,"aria-expanded":m,"aria-readonly":!0,"aria-disabled":i,ref:E,onKeyDown:function(e){var r;switch(e.which){case 27:case 38:p(!1),null==E||null===(r=E.current)||void 0===r||r.focus();break;case 32:case 13:case 40:p(!0);break;default:return}e.preventDefault()},onFocus:function(){return!h&&g(!0)},onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||(g(!1),p(!1))},onMouseEnter:function(){return C(!0)},onMouseLeave:function(){return C(!1)}},t.createElement("div",{className:w+" dropdown-heading",onClick:function(){return p(!l&&!i&&!m)}},t.createElement("div",{className:"dropdown-heading-value"},r),l&&t.createElement(k,null),t.createElement(b,{expanded:m})),m&&t.createElement("div",{className:S+" dropdown-content"},t.createElement("div",{className:"panel-content"},t.createElement(a,Object.assign({},o)))))},R=function(e){var r=e.value,n=e.options,a=e.valueRenderer,o=e.overrideStrings,l=0===r.length,c=r.length===n.length,s=a&&a(r,n);return l?t.createElement("span",{className:"gray"},s||i("selectSomeItems",o)):t.createElement("span",null,s||(c?i("allItemsAreSelected",o):r.map((function(e){return e.label})).join(", ")))},N=r.css({"--rmscMain":"#4285f4","--rmscHover":"#f1f3f5","--rmscSelected":"#e2e6ea","--rmscBorder":"#ccc","--rmscGray":"#aaa","--rmscBg":"#fff","--rmscP":"10px","--rmscRadius":"4px","--rmscH":"38px","*":{boxSizing:"border-box",transition:"all 0.2s ease"},".gray":{color:"var(--rmsc-gray)"}});exports.Dropdown=C,exports.SelectItem=m,exports.SelectPanel=b,exports.default=function(e){var r=e.focusSearchOnOpen,n=e.hasSelectAll,a=e.className,o=e.options,l=e.overrideStrings,i=e.disabled,c=e.value||[];return t.createElement("div",{className:N+" "+(void 0===a?"multi-select":a)},t.createElement(C,{isLoading:e.isLoading,contentComponent:b,shouldToggleOnHover:e.shouldToggleOnHover,contentProps:{ItemRenderer:e.ItemRenderer,options:o,value:c,hasSelectAll:void 0===n||n,selectAllLabel:e.selectAllLabel,onChange:e.onChange,disabled:i,disableSearch:e.disableSearch,focusSearchOnOpen:void 0===r||r,filterOptions:e.filterOptions,overrideStrings:l,ClearIcon:e.ClearIcon},disabled:i,labelledBy:e.labelledBy,onMenuToggle:e.onMenuToggle,ArrowRenderer:e.ArrowRenderer},t.createElement(R,{value:c,options:o,valueRenderer:e.valueRenderer,overrideStrings:l})))};
//# sourceMappingURL=react-multi-select-component.cjs.production.min.js.map
